(self["webpackChunkguest"]=self["webpackChunkguest"]||[]).push([[819],{65819:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return D}});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"RegionConfig"},[i("div",{staticClass:"operating_top"},[i("el-input",{staticStyle:{width:"216px"},attrs:{clearable:"",size:"medium",placeholder:"输入省份名","suffix-icon":"el-icon-search"},on:{clear:e.getRegionList},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getRegionList.apply(null,arguments)}},model:{value:e.query.provinceName,callback:function(t){e.$set(e.query,"provinceName",t)},expression:"query.provinceName"}}),i("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"medium",type:"info"},on:{click:e.getRegionList}},[e._v(" 搜索 ")]),i("el-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"el-icon-plus",size:"medium",type:"primary"},on:{click:function(t){return e.saveProvince()}}},[e._v(" 添加省份 ")])],1),i("div",{staticClass:"data_medium"},[i("div",{staticClass:"left_list"},e._l(e.regionList,(function(t,n){return i("el-card",{key:t.id,class:{isActive:e.isActiveIndex===n},nativeOn:{"!click":function(i){return e.activeCard(t,n)},mouseenter:function(t){return e.cardMouseEnter(n)},mouseleave:function(t){return e.cardMouseLeave()}}},[i("div",{staticClass:"name"},[i("svg-icon",{staticStyle:{"margin-right":"4px"},attrs:{"icon-class":"name"}}),e._v(" "+e._s(t.provinceName)+" "),i("el-switch",{attrs:{"active-color":"#5A97DB","inactive-color":"#000",width:35},nativeOn:{click:function(i){return e.regionStatusUpdate(t)}},model:{value:t.status,callback:function(i){e.$set(t,"status",i)},expression:"item.status"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:n===e.mouseEnterIndex,expression:"index === mouseEnterIndex"}],staticClass:"btn"},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.insCitys(t)}}},[i("svg-icon",{attrs:{"icon-class":"insert","class-name":"insert"}})],1),i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.updateProvince(t)}}},[i("svg-icon",{attrs:{"icon-class":"update","class-name":"update"}})],1),i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.deleteProvince(t)}}},[i("svg-icon",{attrs:{"icon-class":"delete","class-name":"delete"}})],1)])],1),i("div",{staticClass:"bottom"},[i("div",{staticClass:"code"},[i("svg-icon",{staticStyle:{"margin-right":"4px"},attrs:{"icon-class":"code"}}),e._v(" "+e._s(t.code)+" ")],1),i("div",{staticClass:"time"},[e._v(e._s(e.$moment(t.createDate).format("YYYY/MM/DD h:mm:ss")))])])])})),1),i("div",{staticClass:"tableContainer"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table_date,"cell-style":e.changeCellStyle}},[i("el-table-column",{attrs:{label:"城市名","min-width":"130",prop:"cityName"}}),i("el-table-column",{attrs:{label:"城市编码","min-width":"130",prop:"code"}}),i("el-table-column",{attrs:{label:"新建时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(t.row.createDate).format("YYYY/MM/DD h:mm:ss"))+" ")]}}])}),i("el-table-column",{attrs:{label:"启用状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{"!click":function(i){return e.updateCityStatus(t.row)}},model:{value:t.row.status,callback:function(i){e.$set(t.row,"status",i)},expression:"scope.row.status"}})]}}])}),i("el-table-column",{attrs:{label:"操作",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.deleteCity(t.row)}}},[i("svg-icon",{staticStyle:{"margin-right":"4px"},attrs:{"icon-class":"delete","class-name":"delete"}})],1),i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.updateCity(t.row)}}},[i("svg-icon",{attrs:{"icon-class":"update","class-name":"update"}})],1)]}}])})],1)],1)]),i("InsRegionDialog",{attrs:{insRegionDialogVisible:e.insRegionDialogVisible,saveOrUpdate:e.saveOrUpdate,title:e.title},on:{"update:insRegionDialogVisible":function(t){e.insRegionDialogVisible=t},"update:ins-region-dialog-visible":function(t){e.insRegionDialogVisible=t},getRegionList:e.getRegionList}}),i("InsCityDialog",{attrs:{insCityDialogVisible:e.insCityDialogVisible,citySelect:e.citySelect,citySaveOrUpdate:e.citySaveOrUpdate,cityDialogTitle:e.cityDialogTitle},on:{"update:insCityDialogVisible":function(t){e.insCityDialogVisible=t},"update:ins-city-dialog-visible":function(t){e.insCityDialogVisible=t},getTableData:e.getTableData}})],1)},s=[],r=i(16198),a=(i(78975),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.title,visible:e.insRegionDialogVisible,width:"30%","before-close":e.handleClose,"append-to-body":""},on:{close:e.provinceClosed}},[i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.province,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"省份名称:",prop:"provinceName"}},[i("el-select",{staticStyle:{width:"216px"},attrs:{size:"medium"},model:{value:e.province.provinceName,callback:function(t){e.$set(e.province,"provinceName",t)},expression:"province.provinceName"}},e._l(e.regions,(function(e){return i("el-option",{key:e.id,attrs:{value:e.district_name,label:e.district_name}})})),1)],1),i("el-form-item",{attrs:{label:"省份编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"216px"},attrs:{size:"medium"},model:{value:e.province.code,callback:function(t){e.$set(e.province,"code",t)},expression:"province.code"}})],1),i("el-form-item",{attrs:{label:"启用:"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.province.status,callback:function(t){e.$set(e.province,"status",t)},expression:"province.status"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"medium",type:"info"},on:{click:function(t){return e.handleClose()}}},[e._v("取 消")]),i("el-button",{attrs:{size:"medium",type:"success"},on:{click:function(t){return e.saveRegion()}}},[e._v("确 定")])],1)],1)}),o=[],c=(i(9653),i(88937)),u=i.n(c),l={name:"InsRegionDialog",data:function(){return{regions:[],province:{id:"",provinceName:"",code:"",status:!0},rules:{provinceName:[{required:!0,message:"请输入省份名称",trigger:"blur"}],code:[{required:!0,message:"请输入省份编码",trigger:"blur"}]}}},props:{insRegionDialogVisible:{type:Boolean,default:!1},saveOrUpdate:{type:Number},title:{type:String}},methods:{handleClose:function(){this.$emit("update:insRegionDialogVisible",!1)},provinceClosed:function(){this.province={id:"",provinceName:"",code:"",status:!0},this.$refs["form"].resetFields()},saveRegion:function(){var e=this;this.$refs["form"].validate(function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(i){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.postRequest("/region/provinceau?operation=".concat(e.saveOrUpdate),e.province);case 4:n=t.sent,200===n.status&&(0===e.saveOrUpdate?e.$message.success("添加省份成功！"):1===e.saveOrUpdate?e.$message.success("修改省份成功！"):e.$message.error("操作符错误！"),e.handleClose(),e.$emit("getRegionList"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},updateRegion:function(e){this.province.id=e.id,this.province.provinceName=e.provinceName,this.province.code=e.code,this.province.status=e.status,this.province.createDate=e.createDate},getAllRegion:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRequest("/district/selRegion");case 2:i=t.sent,e.regions=i.data;case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;this.regionPubSub=u().subscribe("update",(function(t,i){e.updateRegion(i)}))},created:function(){this.getAllRegion()},beforeDestroy:function(){u().unsubscribe(this.regionPubSub)}},p=l,d=i(1001),f=(0,d.Z)(p,a,o,!1,null,"0a7e9d90",null),m=f.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.cityDialogTitle,visible:e.insCityDialogVisible,width:"30%","before-close":e.handleClose,"append-to-body":""},on:{close:e.citysDialogClosed}},[i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.citys,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"城市名称:",prop:"cityName"}},[i("el-select",{staticStyle:{width:"216px"},attrs:{size:"medium"},model:{value:e.citys.cityName,callback:function(t){e.$set(e.citys,"cityName",t)},expression:"citys.cityName"}},e._l(e.citySelect,(function(e){return i("el-option",{key:e.id,attrs:{value:e.district_name,label:e.district_name}})})),1)],1),i("el-form-item",{attrs:{label:"城市编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"216px"},attrs:{size:"medium"},model:{value:e.citys.code,callback:function(t){e.$set(e.citys,"code",t)},expression:"citys.code"}})],1),i("el-form-item",{attrs:{label:"启用:"}},[i("el-switch",{model:{value:e.citys.status,callback:function(t){e.$set(e.citys,"status",t)},expression:"citys.status"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"medium",type:"info"},on:{click:e.handleClose}},[e._v("取 消")]),i("el-button",{attrs:{size:"medium",type:"success"},on:{click:e.saveCity}},[e._v("确 定")])],1)],1)},v=[],y={name:"InsCityDialog",data:function(){return{citys:{id:"",cityName:"",code:"",provinceId:"",status:!0},rules:{cityName:[{required:!0,message:"请选择城市名称",trigger:"change"}],code:[{required:!0,message:"请输入城市编码",trigger:"blur"}]}}},props:{insCityDialogVisible:{type:Boolean,default:!1},citySaveOrUpdate:{type:Number},cityDialogTitle:{type:String},citySelect:{type:Array}},methods:{handleClose:function(){this.$emit("update:insCityDialogVisible",!1)},citysDialogClosed:function(){this.citys={id:"",cityName:"",code:"",provinceId:"",status:!0},this.$refs["form"].resetFields()},saveCity:function(){var e=this;this.$refs["form"].validate(function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(i){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return");case 2:return n=window.sessionStorage.getItem("activeRegion"),e.citys.provinceId=n,t.next=6,e.postRequest("/ciyts/citysau?operation="+e.citySaveOrUpdate,e.citys);case 6:s=t.sent,200===s.status&&(0===e.citySaveOrUpdate?e.$message.success("添加城市成功！"):1===e.citySaveOrUpdate&&e.$message.success("编辑城市成功！"),e.handleClose(),e.$emit("getTableData",n));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},updateCity:function(e){this.citys={id:e.id,cityName:e.cityName,code:e.code,provinceId:e.provinceId,status:e.status}}},mounted:function(){var e=this;this.cityId=u().subscribe("update",(function(t,i){e.updateCity(i)}))},beforeDestroy:function(){u().unsubscribe(this.cityId)}},b=y,h=(0,d.Z)(b,g,v,!1,null,"a5a9c49e",null),x=h.exports,w={name:"RegionConfig",components:{InsRegionDialog:m,InsCityDialog:x},data:function(){return{insRegionDialogVisible:!1,title:"",insCityDialogVisible:!1,cityDialogTitle:"",regionList:[],citySelect:[],query:{provinceName:""},isActiveIndex:0,mouseEnterIndex:null,saveOrUpdate:null,citySaveOrUpdate:null,table_date:[]}},methods:{changeCellStyle:function(e){if("操作"===e.column.label)return"display:flex;"},getRegionList:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRequest("/region/selAll",e.query);case 2:i=t.sent,e.regionList=i.data.query_province,e.regionList.length>0&&e.getTableData(e.regionList[0].id);case 5:case"end":return t.stop()}}),t)})))()},deleteProvince:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function i(){var n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$messageBox.confirm("此操作会删除该省份信息，是否继续","确认删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){t.$message.info("已取消删除！")}));case 2:if(n=i.sent,"confirm"===n){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,t.getRequest("/region/operationdu",{operation:0,id:e.id});case 7:s=i.sent,200===s.status&&(t.$message.success("删除[".concat(e.provinceName,"]省份信息成功！")),t.getRegionList());case 9:case"end":return i.stop()}}),i)})))()},regionStatusUpdate:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function i(){var n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$messageBox.confirm("此操作会修改该省份的启用状态，是否继续","确认？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){e.status=!e.status,t.$message.info("已取消操作！")}));case 2:if(n=i.sent,"confirm"===n){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,t.getRequest("/region/operationdu",{operation:1,id:e.id});case 7:s=i.sent,200===s.status&&(t.$message.success("修改[".concat(e.provinceName,"]省份状态成功！")),t.getRegionList());case 9:case"end":return i.stop()}}),i)})))()},saveProvince:function(){this.saveOrUpdate=0,this.title="新增省份信息",this.insRegionDialogVisible=!0},updateProvince:function(e){this.saveOrUpdate=1,this.title="编辑省份信息",this.insRegionDialogVisible=!0,u().publish("update",e)},activeCard:function(e,t){window.sessionStorage.setItem("activeRegion",e.id),this.isActiveIndex=t,this.getTableData(e.id)},cardMouseEnter:function(e){this.mouseEnterIndex=e},cardMouseLeave:function(){this.mouseEnterIndex=null},insCitys:function(e){this.cityDialogTitle="新增城市信息",this.citySaveOrUpdate=0,this.listCitysByDistrict(e.provinceName),this.insCityDialogVisible=!0},listCitysByDistrict:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.getRequest("/district/selByName?provinceName=".concat(e));case 2:n=i.sent,t.citySelect=n.data;case 4:case"end":return i.stop()}}),i)})))()},getTableData:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.getRequest("/ciyts/selByPIdD?regionId=".concat(e));case 2:n=i.sent,t.table_date=n.data;case 4:case"end":return i.stop()}}),i)})))()},deleteCity:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function i(){var n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$messageBox.confirm("此操作会删除该城市信息，是否继续","确认删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){t.$message.info("已取消删除！")}));case 2:if(n=i.sent,"confirm"===n){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,t.getRequest("/ciyts/citysdu",{operation:"0",cityId:e.id});case 7:s=i.sent,200===s.status&&(t.$message({type:"success",message:"删除城市信息成功！",duration:0}),t.getTableData(e.provinceId));case 9:case"end":return i.stop()}}),i)})))()},updateCity:function(e){this.cityDialogTitle="编辑城市信息",this.citySaveOrUpdate=1,this.listCitysByDistrict(e.province.provinceName),this.insCityDialogVisible=!0,u().publish("update",e)},updateCityStatus:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function i(){var n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$messageBox.confirm("此操作会修改该城市的启用状态，是否继续","确认？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){e.status=!e.status,t.$message.info("已取消操作！")}));case 2:if(n=i.sent,"confirm"===n){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,t.getRequest("/ciyts/citysdu",{operation:"1",cityId:e.id});case 7:s=i.sent,200===s.status&&(t.$message.success("修改[".concat(e.cityName,"]城市状态成功！")),t.getRegionList());case 9:case"end":return i.stop()}}),i)})))()}},created:function(){this.getRegionList()},mounted:function(){}},R=w,C=(0,d.Z)(R,n,s,!1,null,"53c33897",null),D=C.exports},88937:function(e,t,i){var n;e=i.nmd(e);var s=i(17964)["default"];i(41539),i(39714),function(r,a){"use strict";var o={};r.PubSub?(o=r.PubSub,console.warn("PubSub already loaded, using existing version")):(r.PubSub=o,a(o)),"object"===s(t)?(void 0!==e&&e.exports&&(t=e.exports=o),t.PubSub=o,e.exports=t=o):(n=function(){return o}.call(t,i,t,e),void 0===n||(e.exports=n))}("object"===("undefined"===typeof window?"undefined":s(window))&&window||this,(function(e){"use strict";var t={},i=-1,n="*";function r(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function a(e){return function(){throw e}}function o(e,t,i){try{e(t,i)}catch(n){setTimeout(a(n),0)}}function c(e,t,i){e(t,i)}function u(e,i,n,s){var r,a=t[i],u=s?c:o;if(Object.prototype.hasOwnProperty.call(t,i))for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&u(a[r],e,n)}function l(e,t,i){return function(){var s=String(e),r=s.lastIndexOf(".");u(e,e,t,i);while(-1!==r)s=s.substr(0,r),r=s.lastIndexOf("."),u(e,s,t,i);u(e,n,t,i)}}function p(e){var i=String(e),n=Boolean(Object.prototype.hasOwnProperty.call(t,i)&&r(t[i]));return n}function d(e){var t=String(e),i=p(t)||p(n),s=t.lastIndexOf(".");while(!i&&-1!==s)t=t.substr(0,s),s=t.lastIndexOf("."),i=p(t);return i}function f(e,t,i,n){e="symbol"===s(e)?e.toString():e;var r=l(e,t,n),a=d(e);return!!a&&(!0===i?r():setTimeout(r,0),!0)}e.publish=function(t,i){return f(t,i,!1,e.immediateExceptions)},e.publishSync=function(t,i){return f(t,i,!0,e.immediateExceptions)},e.subscribe=function(e,n){if("function"!==typeof n)return!1;e="symbol"===s(e)?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var r="uid_"+String(++i);return t[e][r]=n,r},e.subscribeAll=function(t){return e.subscribe(n,t)},e.subscribeOnce=function(t,i){var n=e.subscribe(t,(function(){e.unsubscribe(n),i.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&0===i.indexOf(e)&&delete t[i]},e.countSubscriptions=function(e){var i,n,s=0;for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&0===i.indexOf(e)){for(n in t[i])s++;break}return s},e.getSubscriptions=function(e){var i,n=[];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&0===i.indexOf(e)&&n.push(i);return n},e.unsubscribe=function(i){var n,s,r,a=function(e){var i;for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&0===i.indexOf(e))return!0;return!1},o="string"===typeof i&&(Object.prototype.hasOwnProperty.call(t,i)||a(i)),c=!o&&"string"===typeof i,u="function"===typeof i,l=!1;if(!o){for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s=t[n],c&&s[i]){delete s[i],l=i;break}if(u)for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&s[r]===i&&(delete s[r],l=!0)}return l}e.clearSubscriptions(i)}}))}}]);
//# sourceMappingURL=819-legacy.ba3fdc1e.js.map